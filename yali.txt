=====mongo k8s 单节点
wrk -c 100 -d 15 -t 8 --latency http://192.168.0.97:32251/v1/mongo/bj/mongoget
wrk -c 500 -d 15 -t 8 --latency http://192.168.0.97:32251/v1/mongo/bj/mongoget
wrk -c 1000 -d 15 -t 8 --latency http://192.168.0.97:32251/v1/mongo/bj/mongoget
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://192.168.0.97:32251/v1/mongo/bj/mongoput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://192.168.0.97:32251/v1/mongo/bj/mongoput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://192.168.0.97:32251/v1/mongo/bj/mongoput

wrk -c 1000 -d 15 -t 8 --latency http://192.168.0.100/v1/mongo/bj/mongoget


===mongo k8s no istio===
wrk -c 100 -d 15 -t 8 --latency http://39.97.20.15/v1/mongo/bj/mongoget
wrk -c 500 -d 15 -t 8 --latency http://39.97.20.15/v1/mongo/bj/mongoget
wrk -c 1000 -d 15 -t 8 --latency http://39.97.20.15/v1/mongo/bj/mongoget
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://39.97.20.15/v1/mongo/bj/mongoput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://39.97.20.15/v1/mongo/bj/mongoput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://39.97.20.15/v1/mongo/bj/mongoput

===mongo k8s and istio===
wrk -c 100 -d 15 -t 8 --latency http://39.97.129.156/v1/mongo/bj/mongoget
wrk -c 500 -d 15 -t 8 --latency http://39.97.129.156/v1/mongo/bj/mongoget
wrk -c 1000 -d 15 -t 8 --latency http://39.97.129.156/v1/mongo/bj/mongoget
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://39.97.129.156/v1/mongo/bj/mongoput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://39.97.129.156/v1/mongo/bj/mongoput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://39.97.129.156/v1/mongo/bj/mongoput

===mongo ECS ELB===
wrk -c 100 -d 15 -t 8 --latency http://10.146.151.102/v1/mongo/bj/mongoget
wrk -c 500 -d 15 -t 8 --latency http://10.146.151.102/v1/mongo/bj/mongoget
wrk -c 1000 -d 15 -t 8 --latency http://10.146.151.102/v1/mongo/bj/mongoget
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.146.151.102/v1/mongo/bj/mongoput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.146.151.102/v1/mongo/bj/mongoput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.146.151.102/v1/mongo/bj/mongoput

===mongo ECS 单节点1===
wrk -c 100 -d 15 -t 8 --latency http://10.24.192.74/v1/mongo/bj/mongoget
wrk -c 500 -d 15 -t 8 --latency http://10.24.192.74/v1/mongo/bj/mongoget
wrk -c 1000 -d 15 -t 8 --latency http://10.24.192.74/v1/mongo/bj/mongoget
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.24.192.74/v1/mongo/bj/mongoput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.24.192.74/v1/mongo/bj/mongoput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.24.192.74/v1/mongo/bj/mongoput

===mongo ECS 单节点2===
wrk -c 100 -d 15 -t 8 --latency http://10.25.94.208/v1/mongo/bj/mongoget
wrk -c 500 -d 15 -t 8 --latency http://10.25.94.208/v1/mongo/bj/mongoget
wrk -c 1000 -d 15 -t 8 --latency http://10.25.94.208/v1/mongo/bj/mongoget
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.25.94.208/v1/mongo/bj/mongoput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.25.94.208/v1/mongo/bj/mongoput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.25.94.208/v1/mongo/bj/mongoput


===mysql k8s no istio===
wrk -c 100 -d 15 -t 8 --latency http://39.97.20.15/v1/mysql/spider_bj/get
wrk -c 500 -d 15 -t 8 --latency http://39.97.20.15/v1/mysql/spider_bj/get
wrk -c 1000 -d 15 -t 8 --latency http://39.97.20.15/v1/mysql/spider_bj/get
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://39.97.20.15/v1/mysql/spider_bj/put
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://39.97.20.15/v1/mysql/spider_bj/put
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://39.97.20.15/v1/mysql/spider_bj/put

===mysql k8s and istio===
wrk -c 100 -d 15 -t 8 --latency http://39.97.129.156/v1/mysql/spider_bj/get
wrk -c 500 -d 15 -t 8 --latency http://39.97.129.156/v1/mysql/spider_bj/get
wrk -c 1000 -d 15 -t 8 --latency http://39.97.129.156/v1/mysql/spider_bj/get
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://39.97.129.156/v1/mysql/spider_bj/put
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://39.97.129.156/v1/mysql/spider_bj/put
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://39.97.129.156/v1/mysql/spider_bj/put


==mysql==slb
wrk -c 100 -d 15 -t 8 --latency http://10.146.151.102/v1/mysql/spider_bj/get
wrk -c 500 -d 15 -t 8 --latency http://10.146.151.102/v1/mysql/spider_bj/get
wrk -c 1000 -d 15 -t 8 --latency http://10.146.151.102/v1/mysql/spider_bj/get
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.146.151.102/v1/mysql/spider_bj/put
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.146.151.102/v1/mysql/spider_bj/put
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.146.151.102/v1/mysql/spider_bj/put

es==k8s 单节点
./wrk -t 8 -c 100 -d 15 --latency http://192.168.0.97:32251/v1/es/bj/esquery
./wrk -t 8 -c 500 -d 15 --latency http://192.168.0.97:32251/v1/es/bj/esquery
./wrk -t 8 -c 1000 -d 15 --latency http://192.168.0.97:32251/v1/es/bj/esquery
./wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://192.168.0.97:32251/v1/es/bj/esput
./wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://192.168.0.97:32251/v1/es/bj/esput
./wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://192.168.0.97:32251/v1/es/bj/esput


es==k8s no istio
wrk -t 8 -c 100 -d 15 --latency http://39.97.20.15/v1/es/bj/esquery
wrk -t 8 -c 500 -d 15 --latency http://39.97.20.15/v1/es/bj/esquery
wrk -t 8 -c 1000 -d 15 --latency http://39.97.20.15/v1/es/bj/esquery
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://39.97.20.15/v1/es/bj/esput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://39.97.20.15/v1/es/bj/esput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://39.97.20.15/v1/es/bj/esput

es==k8s and istio
wrk -t 8 -c 100 -d 15 --latency http://39.97.129.156/v1/es/bj/esquery
wrk -t 8 -c 500 -d 15 --latency http://39.97.129.156/v1/es/bj/esquery
wrk -t 8 -c 1000 -d 15 --latency http://39.97.129.156/v1/es/bj/esquery
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://39.97.129.156/v1/es/bj/esput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://39.97.129.156/v1/es/bj/esput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://39.97.129.156/v1/es/bj/esput

es==SLB
wrk -t 8 -c 100 -d 15 --latency http://10.146.151.102/v1/es/bj/esquery
wrk -t 8 -c 500 -d 15 --latency http://10.146.151.102/v1/es/bj/esquery
wrk -t 8 -c 1000 -d 15 --latency http://10.146.151.102/v1/es/bj/esquery
wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.146.151.102/v1/es/bj/esput
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.146.151.102/v1/es/bj/esput
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.146.151.102/v1/es/bj/esput


es==单节点1
wrk -t 8 -c 100 -d 15 --latency http://10.24.192.74/v1/es/bj/esquery

wrk -t 8 -c 500 -d 15 --latency http://10.24.192.74/v1/es/bj/esquery

wrk -t 8 -c 1000 -d 15 --latency http://10.24.192.74/v1/es/bj/esquery

wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.24.192.74/v1/es/bj/esput

wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.24.192.74/v1/es/bj/esput

wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.24.192.74/v1/es/bj/esput

es==单节点2
wrk -t 8 -c 100 -d 15 --latency http://10.25.94.208/v1/es/bj/esquery

wrk -t 8 -c 500 -d 15 --latency http://10.25.94.208/v1/es/bj/esquery

wrk -t 8 -c 1000 -d 15 --latency http://10.25.94.208/v1/es/bj/esquery

wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.25.94.208/v1/es/bj/esput

wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.25.94.208/v1/es/bj/esput

wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.25.94.208/v1/es/bj/esput


redis==k8s no isto
wrk -t 8 -c 100 -d 15 --latency http://39.97.20.15/v1/redis/hashget
wrk -t 8 -c 500 -d 15 --latency http://39.97.20.15/v1/redis/hashget
wrk -t 8 -c 1000 -d 15 --latency http://39.97.20.15/v1/redis/hashget
wrk -t 8 -c 100 -d 15 --latency http://39.97.20.15/v1/redis/hashput
wrk -t 8 -c 500 -d 15  --latency http://39.97.20.15/v1/redis/hashput
wrk -t 8 -c 1000 -d 15 --latency http://39.97.20.15/v1/redis/hashput

redis==k8s and isto
wrk -t 8 -c 100 -d 15 --latency http://39.97.129.156/v1/redis/hashget
wrk -t 8 -c 500 -d 15 --latency http://39.97.129.156/v1/redis/hashget
wrk -t 8 -c 1000 -d 15 --latency http://39.97.129.156/v1/redis/hashget
wrk -t 8 -c 100 -d 15  --latency http://39.97.129.156/v1/redis/hashput
wrk -t 8 -c 500 -d 15  --latency http://39.97.129.156/v1/redis/hashput
wrk -t 8 -c 1000 -d 15  --latency http://39.97.129.156/v1/redis/hashput

redis==ecs ELB
wrk -t 8 -c 100 -d 15 --latency http://10.146.151.102/v1/redis/hashget
wrk -t 8 -c 500 -d 15 --latency http://10.146.151.102/v1/redis/hashget
wrk -t 8 -c 1000 -d 15 --latency http://10.146.151.102/v1/redis/hashget
wrk -t 8 -c 100 -d 15  --latency http://10.146.151.102/v1/redis/hashput
wrk -t 8 -c 500 -d 15 --latency http://10.146.151.102/v1/redis/hashput
wrk -t 8 -c 1000 -d 15  --latency http://10.146.151.102/v1/redis/hashput

===pika===
./wrk -t 8 -c 100 -d 15 --latency http://192.168.0.97:32251/v1/pika/hashget
./wrk -t 8 -c 500 -d 15 --latency http://192.168.0.97:32251/v1/pika/hashget
./wrk -t 8 -c 1000 -d 15 --latency http://192.168.0.97:32251/v1/pika/hashget
./wrk -t 8 -c 100 -d 15 --latency http://192.168.0.97:32251/v1/pika/hashput
./wrk -t 8 -c 500 -d 15 --latency http://192.168.0.97:32251/v1/pika/hashput
./wrk -t 8 -c 1000 -d 15 --latency http://192.168.0.97:32251/v1/pika/hashput

./wrk -t 8 -c 500 -d 15 --latency http://192.168.0.100/v1/pika/hashget
./wrk -t 8 -c 500 -d 15 --latency http://101.201.169.22/v1/pika/hashget


===pika k8s no istio===
wrk -t 8 -c 100 -d 15 --latency http://39.97.20.15/v1/pika/hashget
wrk -t 8 -c 500 -d 15 --latency http://39.97.20.15/v1/pika/hashget
wrk -t 8 -c 1000 -d 15 --latency http://39.97.20.15/v1/pika/hashget
wrk -t 8 -c 100 -d 15 --latency http://39.97.20.15/v1/pika/hashput
wrk -t 8 -c 500 -d 15 --latency http://39.97.20.15/v1/pika/hashput
wrk -t 8 -c 1000 -d 15 --latency http://39.97.20.15/v1/pika/hashput

===pika k8s and istio===
wrk -t 8 -c 100 -d 15 --latency http://39.97.129.156/v1/pika/hashget
wrk -t 8 -c 500 -d 15 --latency http://39.97.129.156/v1/pika/hashget
wrk -t 8 -c 1000 -d 15 --latency http://39.97.129.156/v1/pika/hashget
wrk -t 8 -c 100 -d 15 --latency http://39.97.129.156/v1/pika/hashput
wrk -t 8 -c 500 -d 15 --latency http://39.97.129.156/v1/pika/hashput
wrk -t 8 -c 1000 -d 15 --latency http://39.97.129.156/v1/pika/hashput

===pika ECS SLB===
wrk -t 8 -c 100 -d 15 --latency http://10.146.151.102/v1/pika/hashget
wrk -t 8 -c 500 -d 15 --latency http://10.146.151.102/v1/pika/hashget
wrk -t 8 -c 1000 -d 15 --latency http://10.146.151.102/v1/pika/hashget
wrk -t 8 -c 100 -d 15 --latency http://10.146.151.102/v1/pika/hashput
wrk -t 8 -c 500 -d 15 --latency http://10.146.151.102/v1/pika/hashput
wrk -t 8 -c 1000 -d 15 --latency http://10.146.151.102/v1/pika/hashput

===pika ECS 节点1===
wrk -t 8 -c 100 -d 15 --latency http://10.24.192.74/v1/pika/hashget
wrk -t 8 -c 500 -d 15 --latency http://10.24.192.74/v1/pika/hashget
wrk -t 8 -c 1000 -d 15 --latency http://10.24.192.74/v1/pika/hashget
wrk -t 8 -c 100 -d 15 --latency http://10.24.192.74/v1/pika/hashput
wrk -t 8 -c 500 -d 15 --latency http://10.24.192.74/v1/pika/hashput
wrk -t 8 -c 1000 -d 15 --latency http://10.24.192.74/v1/pika/hashput

===pika ECS 节点2===
wrk -t 8 -c 100 -d 15 --latency http://10.25.94.208/v1/pika/hashget
wrk -t 8 -c 500 -d 15 --latency http://10.25.94.208/v1/pika/hashget
wrk -t 8 -c 1000 -d 15 --latency http://10.25.94.208/v1/pika/hashget
wrk -t 8 -c 100 -d 15 --latency http://10.25.94.208/v1/pika/hashput
wrk -t 8 -c 500 -d 15 --latency http://10.25.94.208/v1/pika/hashput
wrk -t 8 -c 1000 -d 15 --latency http://10.25.94.208/v1/pika/hashput



==mysql ECS ELB压力测试==
wrk -t 8 -c 100 -d 15 --latency http://10.146.151.102/v1/mysql/spider_bj/get
wrk -t 8 -c 500 -d 15 --latency http://10.146.151.102/v1/mysql/spider_bj/get
wrk -t 8 -c 1000 -d 15 --latency http://10.146.151.102/v1/mysql/spider_bj/get


wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://10.25.94.208/v1/mysql/spider_bj/put
wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://10.25.94.208/v1/mysql/spider_bj/put
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://10.25.94.208/v1/mysql/spider_bj/put

===mongo ECS ELB===

wrk -c 100 -d 15 -t 8  --latency "http://10.146.151.102/v1/mongo/bj/mongoget"
wrk -c 500 -d 15 -t 8  --latency "http://10.146.151.102/v1/mongo/bj/mongoget"
 wrk -c 1000 -d 15 -t 8  --latency "http://10.146.151.102/v1/mongo/bj/mongoget"


wrk -t 8 -c 100 -d 15 --script=post.lua --latency "http://10.25.94.208/v1/mongo/bj/mongoput"
wrk -t 8 -c 500 -d 15 --script=post.lua --latency "http://10.25.94.208/v1/mongo/bj/mongoput"
wrk -t 8 -c 1000 -d 15 --script=post.lua --latency "http://10.25.94.208/v1/mongo/bj/mongoput"


===nsq and kafka ECS ELB===
wrk -c 100 -d 15 -t 8 --latency "http://10.146.151.102/v1/nsq/put?topic=1553845601"
wrk -c 500 -d 15 -t 8 --latency "http://10.146.151.102/v1/nsq/put?topic=1553845601"
wrk -c 1000 -d 15 -t 8 --latency "http://10.146.151.102/v1/nsq/put?topic=1553845601"

wrk -c 100 -d 15 -t 8 --latency "http://10.146.151.102/v1/kafka/put?topic=1553845601"
wrk -c 500 -d 15 -t 8 --latency "http://10.146.151.102/v1/kafka/put?topic=1553845601"
wrk -c 1000 -d 15 -t 8 --latency "http://10.146.151.102/v1/kafka/put?topic=1553845601"


===k8s and istio===
wrk -c 100 -d 15 -t 8 --latency "http://39.97.129.156/v1/nsq/put?topic=1553481305"
wrk -c 500 -d 15 -t 8 --latency "http://39.97.129.156/v1/nsq/put?topic=1553481305"
wrk -c 1000 -d 15 -t 8 --latency "http://39.97.129.156/v1/nsq/put?topic=1553481305"

wrk -c 100 -d 15 -t 8 --latency "http://39.97.129.156/v1/kafka/put?topic=1553481305"
wrk -c 500 -d 15 -t 8 --latency "http://39.97.129.156/v1/kafka/put?topic=1553481305"
wrk -c 1000 -d 15 -t 8 --latency "http://39.97.129.156/v1/kafka/put?topic=1553481305"

===k8s no istio===
wrk -c 100 -d 15 -t 8 --latency "http://39.97.20.15/v1/nsq/put?topic=1553481305"
wrk -c 500 -d 15 -t 8 --latency "http://39.97.20.15/v1/nsq/put?topic=1553481305"
wrk -c 1000 -d 15 -t 8 --latency "http://39.97.20.15/v1/nsq/put?topic=1553481305"

wrk -c 100 -d 15 -t 8 --latency "http://39.97.20.15/v1/kafka/put?topic=1553481305"
wrk -c 500 -d 15 -t 8 --latency "http://39.97.20.15/v1/kafka/put?topic=1553481305"
wrk -c 1000 -d 15 -t 8 --latency "http://39.97.20.15/v1/kafka/put?topic=1553481305"

===ECS ELB===
wrk -c 100 -d 15 -t 8 --latency "http://10.146.151.102/v1/nsq/put?topic=1553845601"
wrk -c 500 -d 15 -t 8 --latency "http://10.146.151.102/v1/nsq/put?topic=1553845601"
wrk -c 1000 -d 15 -t 8 --latency "http://10.146.151.102/v1/nsq/put?topic=1553845601"

wrk -c 100 -d 15 -t 8 --latency "http://10.146.151.102/v1/kafka/put?topic=1553845601"
wrk -c 500 -d 15 -t 8 --latency "http://10.146.151.102/v1/kafka/put?topic=1553845601"
wrk -c 1000 -d 15 -t 8 --latency "http://10.146.151.102/v1/kafka/put?topic=1553845601"

===nsq-kafka-单节点work====
./wrk -c 100 -d 15 -t 8 --latency "http://192.168.0.91:32251/v1/nsq/put?topic=1553845601"
./wrk -c 500 -d 15 -t 8 --latency "http://192.168.0.91:32251/v1/nsq/put?topic=1553845601"
./wrk -c 1000 -d 15 -t 8 --latency "http://192.168.0.91:32251/v1/nsq/put?topic=1553845601"

./wrk -c 100 -d 15 -t 8 --latency "http://192.168.0.91:32251/v1/kafka/put?topic=1553845601"
./wrk -c 500 -d 15 -t 8 --latency "http://192.168.0.91:32251/v1/kafka/put?topic=1553845601"
./wrk -c 1000 -d 15 -t 8 --latency "http://192.168.0.91:32251/v1/kafka/put?topic=1553845601"




Ecs机器, k8s 机器 8核16G

查询与写入数量1048字节约1k

body:

{"branch":"beta","change_log":"add the rows{10}","channel":"fros","create_time":"2017-06-13 16:39:08","firmware_list":"","md5":"80dee2bf7305bcf179582088e29fd7b9",
"note":{"CoreServices":{"md5":"d26975c0a8c7369f70ed699f2855cc2e","package_name":"CoreServices","version_code":"76","version_name":"1.0.76"},
"FrDaemon":{"md5":"6b1f0626673200bc2157422cd2103f5d","package_name":"FrDaemon","version_code":"390","version_name":"1.0.390"},
"FrGallery":{"md5":"90d767f0f31bcd3c1d27281ec979ba65","package_name":"FrGallery","version_code":"349","version_name":"1.0.349"},
"FrLocal":{"md5":"f15a215b2c070a80a01f07bde4f219eb","package_name":"FrLocal","version_code":"791","version_name":"1.0.791"}},
"pack_region_urls":{"CN":"https://s3.cn-north-1.amazonaws.com.cn/xxx-os/ttt_xxx_android_1.5.3.344.393.zip",
"default":"http://192.168.8.78/ttt_xxx_android_1.5.3.344.393.zip","local":"http://192.168.8.78/ttt_xxx_android_1.5.3.344.393.zip"},
"pack_version":"1.5.3.344.393","pack_version_code":393,"region":"all","release_flag":0,"revision":62,"size":38966875,"status":3}




连接数	K8s单个work(8核16G)节点-------------------------------------K8s(公网SLB)无istio--------K8s(公网SLB)带istio	Ecs机器 (8核16G)


Get	Post

Get	Post	Get(QPS)	Put(QPS)	Get(QPS)	Put(QPS)
4核8G	-	K8s单个work(8核16G)	节点数	pod数	k8s没有istio	k8s带istio	节点1查询	节点1写入
Mongo	100	20094.23
3291.31
1	2	19327.58
9542.60	7901.73
6039.51
10093.28

3296.01

Mongo	500	20644.39
3303.63
1	2	20080.76
9467.02	8221.63
6490.95
10470.92

3233.88

Mongo	1000	20844.21
3306.42
1	2	19642.60
9504.24	8354.33
7718.88
10878.70

3224.54











节点2查询	节点2写入
Mongo	100	-	-	2	4	26217.81	9401.98
15291.31

7171.96

10092.78	3291.75
Mongo	500	-	-	2	4	26746.80	9544.25
21711.02

7831.15

10466.15

3299.38
Mongo	1000	-	-	2	4	26774.25	9507.19
22894.36

6402.75

10906.19
3224.01










SLB查询	SLB写入
Mongo	100	-	-	3	6	28432.16	10600.78
16207.27

10737.91

17341.90
6571.71
Mongo	500	-	-	3	6	22783.60	9609.52
21157.07

11097.53

14693.59	6533.58
Mongo	1000	-	-	3	6	26697.98	9267.19
21865.27

11364.59

14708.94	6541.19












8核16G
K8s单个work(8核16G)

k8s没有istio	k8s带istio	节点1查询	节点1写入
Pika	100	10329.88	10097.08	1	2	10085.47	10161.17	8192.48
9987.19
10098.08	10087.49
Pika	500	10503.82	10461.91	1	2	11014.34	10481.47	7904.12
6578.46	10613.14	10429.83
Pika	1000	10939.02	11078.59	1	2	10882.09	10876.46	7471.49	6698.54	11512.79	10502.15










节点2查询	节点2写入
Pika	100

2	4	10828.41	11105.60	12576.46	13363.19	10759.65	10088.72
Pika	500

2	4	11511.75	11451.33	17941.91	19624.33	10617.40	10453.66
Pika	1000

2	4	12067.04	11919.62	17561.86	20105.40	10915.19	10911.53










SLB查询	SLB写入
Pika	100	-	-	3	6	16094.90	14454.18	12381.42	13899.60	19284.10	19272.88
Pika	500	-	-	3	6	21481.03	21465.85	18449.54	22588.27	18319.29	20410.95
Pika	1000	-	-	3	6	22046.56	22055.21	19214.99	21554.14	20667.22	17836.64











8核16G
K8s单个work(8核16G)

k8s没有istio	k8s带istio	节点1 查询	节点1 写入
Mysql	100	11669.80	10467.94	1	2	13985.16	8893.71	8137.99	6416.85	17569.57	14887.26
Mysql	500	13220.95	13478.77	1	2	24684.43	12910.20	9758.16	9473.11	18934.28	16109.71
Mysql	1000	12724.89	10692.82	1	2	22941.46	5849.43	9815.32	9264.77	17515.52	13422.95










节点2 查询	节点2 写入
Mysql	100	-	-	2	4	14851.30	8574.29
8400.30

6688.23

16319.76	11360.25
Mysql	500	-	-	2	4	22982.85	12403.45
8738.93

10115.85

22041.58	12395.79
Mysql	1000	-	-	2	4	21735.69	5852.61
9537.62

9379.79

19502.71	6257.74










SLB 查询	SLB 写入
Mysql	100	-	-	3	6	15359.71	9029.69
11700.02

10320.40

14640.18	11474.55
Mysql	500	-	-	3	6	31376.16	9750.80
17094.06

16213.13

23209.97	11163.29
Mysql	1000	-	-	3	6	23021.73	5847.80
16811.41

16396.02

12622.29	6737.37











16核32G
K8s单个work(8核16G)

k8s没有istio	k8s带istio	节点1 查询	节点1 写入
ES	100	10383.59	11136.11	1	2	10597.63	9371.09
8366.52

7232.51

13072.12	13596.06
ES	500	10008.58	10687.07	1	2	10944.13	9855.47
8598.95

7927.40

12820.68	13652.35
ES	1000	10931.30	11578.09	1	2	11609.97	9179.93
8744.81

8576.82

12523.41	10284.64










节点2 查询	节点2 写入
ES	100	-	-	2	4	12646.55	12385.56
11433.19

11116.97

16890.69	16398.68
ES	500	-	-	2	4	11378.33	15181.32
12847.22

12532.48

14063.74	15011.80
ES	1000	-	-	2	4	11471.42	15295.52
13534.41

13118.11

13411.62	14849.49










SLB 查询	SLB 写入
ES	100	-	-	3	6	11923.29	13582.20
12764.52

11638.42

16554.80	17113.61
ES	500	-	-	3	6	22151.23	25345.79
15292.16

14212.57

22559.73	17664.88
ES	1000	-	-	3	6	20689.56	26111.06
14373.69

13875.93

16758.01	13668.44












docker中
K8s单个work(8核16G)

k8s没有istio	k8s带istio

Redis	100	18795.55	21177.48	1	4	16082.60	18057.99	9916.12
9936.77
10068.36	10079.84
Redis	500	25399.29	38892.19	1	4	20860.13	20871.91	12934.43
12190.83
10445.02	10716.66
Redis	1000	28268.27	40985.12	1	4	20961.50	20913.00	12351.82	13176.20
11526.93	10907.80












docker中
K8s单个work(8核16G)

k8s没有istio	k8s带istio	SLB 生产	单节点 生产
Nsq	100	-	13056.93	3	6
9112.64	-	12653.24
11069.77
10152.28

Nsq	500	-	11847.08	3	6
7492.22	-	13148.59
11019.95
10521.63

Nsq	1000	-	11806.87	3	6
7231.28	-	12840.39
11101.05
10914.72













docker中
K8s单个work(8核16G)

k8s没有istio	k8s带istio	SLB 生产	单节点 生产
Kafka	100	-	42071.64	3	6
25108.09	-	17092.42
20312.75
10356.31

Kafka	500	-	45163.37	3	6
91298.75	-	24444.52
21689.48
14582.77

Kafka	1000	-	46703.32	3	6
111311.50	-	25899.18
17715.22
15094.44



























wrk -c 100 -d 15 -t 8 --script=post.lua  --latency "http://182.92.244.184/v1/mongo/bj/mongoput"

wrk -c 100 -d 15 -t 8 --latency "http://182.92.244.184/v1/pika/hashput"

wrk -c 100 -d 15 -t 8 --latency "http://10.24.192.74/v1/redis/hashput"

wrk -c 100 -d 15 -t 8 --latency "http://182.92.244.184/v1/nsq/put?topic=1553481305"

wrk -c 1000 -d 15 -t 8 --latency "http://10.24.192.74/v1/kafka/put?topic=1553481305"



单压暴露节点

./wrk -c 1000 -d 15 -t 8  --latency "http://192.168.0.91:32251/v1/mongo/bj/mongoget"

----mysql----

./wrk -c 100 -d 15 -t 8  --latency  http://192.168.0.91:32251/v1/mysql/spider_bj/get

./wrk -c 500 -d 15 -t 8  --latency  http://192.168.0.91:32251/v1/mysql/spider_bj/get

./wrk -c 1000 -d 15 -t 8  --latency  http://192.168.0.91:32251/v1/mysql/spider_bj/get

./wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://192.168.0.91:32251/v1/mysql/spider_bj/put

./wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://192.168.0.91:32251/v1/mysql/spider_bj/put

./wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://192.168.0.91:32251/v1/mysql/spider_bj/put

-----es----

./wrk -t 8 -c 100 -d 15 --latency http://192.168.0.91:32251/v1/es/bj/esquery

./wrk -t 8 -c 500 -d 15 --latency http://192.168.0.91:32251/v1/es/bj/esquery

./wrk -t 8 -c 1000 -d 15 --latency http://192.168.0.91:32251/v1/es/bj/esquery

./wrk -t 8 -c 100 -d 15 --script=post.lua --latency http://192.168.0.91:32251/v1/es/bj/esput

./wrk -t 8 -c 500 -d 15 --script=post.lua --latency http://192.168.0.91:32251/v1/es/bj/esput

./wrk -t 8 -c 1000 -d 15 --script=post.lua --latency http://192.168.0.91:32251/v1/es/bj/esput

----redis---

./wrk -t 8 -c 100 -d 15 --latency http://192.168.0.91:32251/v1/redis/hashget

./wrk -t 8 -c 500 -d 15 --latency http://192.168.0.91:32251/v1/redis/hashget

./wrk -t 8 -c 1000 -d 15 --latency http://192.168.0.91:32251/v1/redis/hashget

./wrk -t 8 -c 100 -d 15 --latency http://192.168.0.91:32251/v1/redis/hashput

./wrk -t 8 -c 500 -d 15  --latency http://192.168.0.91:32251/v1/redis/hashput

./wrk -t 8 -c 1000 -d 15  --latency http://192.168.0.91:32251/v1/redis/hashput




